specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: LeverageManager
    network: base
    source:
      address: "0x7F2Fa32C991fD2F8dF3EB23C394f550376e9b30d"
      abi: LeverageManager
      startBlock: 30530940
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - DefaultManagementFeeAtCreationSet
        - Initialized
        - LeverageManagerInitialized
        - LeverageTokenActionFeeSet
        - LeverageTokenCreated
        - ManagementFeeCharged
        - ManagementFeeSet
        - Mint
        - Rebalance
        - Redeem
        - RoleAdminChanged
        - RoleGranted
        - RoleRevoked
        - TreasuryActionFeeSet
        - TreasurySet
        - Upgraded
      abis:
        - name: LeverageManager
          file: ./abis/LeverageManager.json
      eventHandlers:
        - event: DefaultManagementFeeAtCreationSet(uint256)
          handler: handleDefaultManagementFeeAtCreationSet
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: LeverageManagerInitialized(address)
          handler: handleLeverageManagerInitialized
        - event: LeverageTokenActionFeeSet(indexed address,indexed uint8,uint256)
          handler: handleLeverageTokenActionFeeSet
        - event: LeverageTokenCreated(indexed
            address,address,address,(address,address,uint256,uint256))
          handler: handleLeverageTokenCreated
        - event: ManagementFeeCharged(indexed address,uint256)
          handler: handleManagementFeeCharged
        - event: ManagementFeeSet(indexed address,uint256)
          handler: handleManagementFeeSet
        - event: Mint(indexed address,indexed
            address,(uint256,uint256,uint256,uint256,uint256,uint256))
          handler: handleMint
        - event: Rebalance(indexed address,indexed address,(uint8,uint256)[])
          handler: handleRebalance
        - event: Redeem(indexed address,indexed
            address,(uint256,uint256,uint256,uint256,uint256,uint256))
          handler: handleRedeem
        - event: RoleAdminChanged(indexed bytes32,indexed bytes32,indexed bytes32)
          handler: handleRoleAdminChanged
        - event: RoleGranted(indexed bytes32,indexed address,indexed address)
          handler: handleRoleGranted
        - event: RoleRevoked(indexed bytes32,indexed address,indexed address)
          handler: handleRoleRevoked
        - event: TreasuryActionFeeSet(indexed uint8,uint256)
          handler: handleTreasuryActionFeeSet
        - event: TreasurySet(address)
          handler: handleTreasurySet
        - event: Upgraded(indexed address)
          handler: handleUpgraded
      file: ./src/leverage-manager.ts
  - kind: ethereum
    name: LeverageToken
    network: base
    source:
      address: "0x15aD877B54859511Ff8f4d239347E93dFf8BBc25"
      abi: LeverageToken
      startBlock: 30530940
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Approval
        - EIP712DomainChanged
        - LeverageTokenInitialized
        - OwnershipTransferred
        - Transfer
      abis:
        - name: LeverageToken
          file: ./abis/LeverageToken.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: EIP712DomainChanged()
          handler: handleEIP712DomainChanged
        - event: LeverageTokenInitialized(string,string)
          handler: handleLeverageTokenInitialized
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/leverage-token.ts
  - kind: ethereum
    name: RebalanceAdapter
    network: base
    source:
      address: "0x37767d8102966577A4f5c7930e0657C592E5061b"
      abi: RebalanceAdapter
      startBlock: 30530940
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - AuctionCreated
        - AuctionEnded
        - CollateralRatiosRebalanceAdapterInitialized
        - DutchAuctionRebalanceAdapterInitialized
        - LeverageTokenSet
        - PreLiquidationRebalanceAdapterInitialized
        - RebalanceAdapterInitialized
        - Take
      abis:
        - name: RebalanceAdapter
          file: ./abis/RebalanceAdapter.json
      eventHandlers:
        - event: AuctionCreated((bool,uint120,uint120))
          handler: handleAuctionCreated
        - event: AuctionEnded()
          handler: handleAuctionEnded
        - event: CollateralRatiosRebalanceAdapterInitialized(uint256,uint256,uint256)
          handler: handleCollateralRatiosRebalanceAdapterInitialized
        - event: DutchAuctionRebalanceAdapterInitialized(uint256,uint256,uint256)
          handler: handleDutchAuctionRebalanceAdapterInitialized
        - event: LeverageTokenSet(address)
          handler: handleLeverageTokenSet
        - event: PreLiquidationRebalanceAdapterInitialized(uint256,uint256)
          handler: handlePreLiquidationRebalanceAdapterInitialized
        - event: RebalanceAdapterInitialized(indexed address,indexed address)
          handler: handleRebalanceAdapterInitialized
        - event: Take(indexed address,uint256,uint256)
          handler: handleTake
      file: ./src/rebalance-adapter.ts
  - kind: ethereum
    name: MorphoBlue
    network: base
    source:
      address: "0xBBBBBbbBBb9cC5e90e3b3Af64bdAF62C37EEFFCc"
      abi: MorphoBlue
      startBlock: 30530940
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - AccrueInterest
        - Borrow
        - CreateMarket
        - EnableIrm
        - EnableLltv
        - FlashLoan
        - IncrementNonce
        - Liquidate
        - Repay
        - SetAuthorization
        - SetFee
        - SetFeeRecipient
        - SetOwner
        - Supply
        - SupplyCollateral
        - Withdraw
        - WithdrawCollateral
      abis:
        - name: MorphoBlue
          file: ./abis/MorphoBlue.json
      eventHandlers:
        - event: AccrueInterest(indexed bytes32,uint256,uint256,uint256)
          handler: handleAccrueInterest
        - event: Borrow(indexed bytes32,address,indexed address,indexed address,uint256,uint256)
          handler: handleBorrow
        - event: CreateMarket(indexed bytes32,(address,address,address,address,uint256))
          handler: handleCreateMarket
        - event: EnableIrm(indexed address)
          handler: handleEnableIrm
        - event: EnableLltv(uint256)
          handler: handleEnableLltv
        - event: FlashLoan(indexed address,indexed address,uint256)
          handler: handleFlashLoan
        - event: IncrementNonce(indexed address,indexed address,uint256)
          handler: handleIncrementNonce
        - event: Liquidate(indexed bytes32,indexed address,indexed
            address,uint256,uint256,uint256,uint256,uint256)
          handler: handleLiquidate
        - event: Repay(indexed bytes32,indexed address,indexed address,uint256,uint256)
          handler: handleRepay
        - event: SetAuthorization(indexed address,indexed address,indexed address,bool)
          handler: handleSetAuthorization
        - event: SetFee(indexed bytes32,uint256)
          handler: handleSetFee
        - event: SetFeeRecipient(indexed address)
          handler: handleSetFeeRecipient
        - event: SetOwner(indexed address)
          handler: handleSetOwner
        - event: Supply(indexed bytes32,indexed address,indexed address,uint256,uint256)
          handler: handleSupply
        - event: SupplyCollateral(indexed bytes32,indexed address,indexed address,uint256)
          handler: handleSupplyCollateral
        - event: Withdraw(indexed bytes32,address,indexed address,indexed address,uint256,uint256)
          handler: handleWithdraw
        - event: WithdrawCollateral(indexed bytes32,address,indexed address,indexed address,uint256)
          handler: handleWithdrawCollateral
      file: ./src/morpho-blue.ts
